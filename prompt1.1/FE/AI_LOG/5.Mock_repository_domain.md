I'll continue implementing the requested changes now.

What I'll do next (summary of steps)

Implement account switching in the Dashboard UI so selecting a different account updates the displayed balance.
Replace the ad-hoc money formatter with intl.NumberFormat (locale-aware).
Add a mock AuthRepository (login, verifyOtp, getCurrentUser) and register mock repos in DI.
Ensure AccountRepositoryImpl implements all required methods (getBalance, getTransactions) and falls back to mock data.
Update docs to explain DI registration and account-switch behavior.
Run the analyzer and fix any errors.
Progress update (actions I just completed)

Added AuthRepository and MockAuthRepository at:
auth_repository.dart — contains login, verifyOtp, and getCurrentUser.
Registered mocks in DI:
di.dart — now registers MockAuthRepository() and registers AccountRepository implementations (AccountRepositoryImpl and then MockAccountRepository fallback).
Cleaned duplicate/unused imports in di.dart.
Implemented account switching and intl formatting:
dashboard_page.dart
Added _selectedAccountId to keep selected account in state.
Dropdown now updates _selectedAccountId via setState.
Displayed account is selected by _selectedAccountId.
Replaced custom formatter with package:intl:
VND: NumberFormat.currency(locale: 'vi_VN', symbol: '₫', decimalDigits: 0)
Other: NumberFormat.simpleCurrency(locale: 'en_US', name: currency)
Implemented missing methods in data repo:
account_repository_impl.dart
Implemented getBalance and getTransactions to satisfy the interface; both try remote then fallback to mock data.
Updated docs:
dashboard_navigator.md — added notes about account switching, NumberFormat usage, and DI registration of mock repos.
Ran the static analyzer:
Before fixes: found missing implementations in AccountRepositoryImpl.
After fixes: analyzer reports "No issues found!"
Files changed (high-level)

Added:
auth_repository.dart — Auth contract + MockAuthRepository.
Edited:
di.dart — register mock repos with get_it.
dashboard_page.dart — account switching + intl formatting.
account_repository_impl.dart — implemented getBalance and getTransactions.
dashboard_navigator.md — updated docs.
Notes, decisions, and assumptions

Mock OTP code is '123456' (keeps previous behavior).
For VND I used no decimal digits in formatting (common practice) and the '₫' symbol via NumberFormat.currency.
I registered both AccountRepositoryImpl and MockAccountRepository in DI — note: the last registration for the same type will win. If you want to prefer one over the other, I can change DI to register only the mock during development, or register implementations under different tokens and expose a switching mechanism. Currently the code registers AccountRepositoryImpl and then re-registers MockAccountRepository (so the mock will be returned). If you prefer AccountRepositoryImpl to be used by default, I can remove the mock registration.
I kept changes minimal and safe; no UI API changes beyond adding selection state and NumberFormat.
What I can do next (pick one or more)

Switch DI to prefer AccountRepositoryImpl by default and only use mock when a flag is set.
Wire the Dashboard to call repository.getBalance(selectedAccountId) when account changes instead of using in-memory account balance (currently uses in-memory list from DashboardCubit).
Add unit tests for DashboardCubit to ensure account loading and selection behavior.
Replace mock AuthRepository usage with DI-aware LoginCubit/provider code to fetch the registered instance.
Implement a small integration test to open the dashboard and switch account to verify the UI updates.
If you'd like, I can now:

Update DI to prefer the real AccountRepositoryImpl (remove the mock registration), or
Wire the Dashboard to fetch balance from repository when the user switches accounts (so the balance is always fresh; I can implement this now).
Which should I do next?




Hoàn tất — tôi đã thêm ErrorWidget và bảo vệ zone để lộ lỗi runtime khi app khởi động:

Những thay đổi chính

main.dart:
Set ErrorWidget.builder để hiển thị chi tiết exception trên màn hình (thay vì màn hình đen).
Bọc runApp(...) bằng runZonedGuarded để log các lỗi uncaught.
Đảm bảo currentFlavor được set trước khi gọi di.init() và LoginCubit lấy AuthRepository từ DI.
Thêm import 'dart:async'; để dùng runZonedGuarded.
Tiếp theo tôi đề xuất

Cách nhanh để debug hiện tại: build lại APK (hoặc cài debug build) và chạy app — nếu có exception lúc khởi tạo sẽ thấy thông báo lỗi trên màn hình thay vì đen. Hoặc bạn có thể mở log với:
flutter run -v (nếu chạy trong môi trường có device/emulator)
hoặc adb logcat | grep -i flutter (nếu đã cài APK trên thiết bị)
Nếu lỗi hiện lên, gửi cho tôi nội dung lỗi (hoặc log) và tôi sẽ sửa ngay.
Muốn tôi tiếp tục làm gì bây giờ?

A: Tự động thêm errorBuilder vào tất cả chỗ Image.asset(...) để tránh crash khi thiếu image.
B: Thay đổi DI để chỉ register một AccountRepository (chứ không register cả impl lẫn mock) để tránh sự không rõ ràng (hiện mock có thể ghi đè impl).
C: Chạy flutter run trong container để thu log (nếu bạn cho phép tôi dùng terminal để chạy).
D: Chỉ chờ bạn thử lại APK và gửi lỗi — tôi sẽ phân tích tiếp.